<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Observatorio ucen</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
        integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

</head>

<body style="background-color: #484f55;">

    <nav class="navbar navbar-dark bg-dark">
        <a href="https://www.politicayredessociales.cl"><img src="https://i.ibb.co/C8XT6vZ/Logo-Observatorio.png" style='margin-left: 30px;'alt="LogoObservatorio" width="120"></a>
        <span class="navbar-brand mb-0 h1" style='margin-right: 1300px;' >Informaci√≥n del estado de los servidores</span>

    </nav>
<div class="container" style="height:  200px; margin-top: 50px;"  >
    <table class="table table-bordered table-dark" >
        <thead>
          <tr>
            <th class="text-center" scope="col">Servidor</th>
            <th class="text-center" scope="col">Estado</th>
            <th class="text-center" scope="col">Query</th>
            <th class="text-center" scope="col">Total queries</th>
            <th class="text-center" scope="col">Fecha inicio</th>
            <th class="text-center" scope="col">Fecha termino</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th class="text-center" scope="row">
                <p style="padding: 10px;">45</p>
            </th>
            <td class="text-center">
                <p id="status45"></p>
            </td>
            <td class="text-center">
                
                <p id="query45"></p>
            </td>   
            <td class="text-center">
                
                <p id="totalQuery45"></p>
            </td>
            <td class="text-center">
                <p id="fechainicio45"></p>
            </td>
            <td class="text-center">
                <p id="fechatermino45"></p>
            </td>
          </tr>
          <tr>
            
            <th class="text-center"  scope="row">
                <p style="padding: 10px;">168</p></th>
           
            <td class="text-center">
                <p id="status168"></p>
            </td>
            <td class="text-center">
                
                <p id="query168"></p>
            </td>   
            <td class="text-center" >
                
                <p id="totalQuery168"></p>
            </td>
            <td class="text-center">
                <p id="fechainicio168"></p>
            </td>
            <td class="text-center">
                <p id="fechatermino168"></p>
            </td>
          </tr>
          <tr>
            <th class="text-center" scope="row">
                <p style="padding: 10px;">170</p>
            </th>
            <td class="text-center">
                <p id="status170"></p>
            </td>
            <td class="text-center">
                
                <p id="query170"></p>
            </td>   
            <td class="text-center">

                <p id="totalQuery170"></p>
            </td>
            <td class="text-center">
                <p id="fechainicio170"></p>
            </td>
            <td class="text-center">
                <p id="fechatermino170"></p>
            </td>
          </tr>
          <tr>
            <th class="text-center" scope="row">
                <p style="padding: 10px;">186</p>
            </th>
            <td class="text-center">
                <p id='status186'></p>
            </td>
            <td class="text-center">
                
                <p id="query186"></p>
            </td>   
            <td class="text-center">
                
                <p id="totalQuery186"></p>
            </td>
            <td class="text-center">
                <p id="fechainicio186"></p>
            </td>
            <td class="text-center">
                <p id="fechatermino186"></p>
            </td>
          </tr>
          <tr>
            <th class="text-center" scope="row">
                <p style="padding: 10px;">186(nuevo)</p>
            </th>
            <td class="text-center">
                <p id='status1862'></p>
            </td>
            <td class="text-center">
                
                <p id="query1862"></p>
            </td>   
            <td class="text-center">
                
                <p id="totalQuery1862"></p>
            </td>
            <td class="text-center">
                <p id="fechainicio1862"></p>
            </td>
            <td class="text-center">
                <p id="fechatermino1862"></p>
            </td>
          </tr>
        </tbody>
      </table>

    <div class="container" style="margin-top: 10px;  " >
        <input type="button" class="btn btn-primary" style="float: right;" value="Actualizar" onclick="javascript:window.location.reload();"/>
    </div>
</div>
    <script>

        var mensaje = [];
        var url='https://observatorioucen.herokuapp.com/api/servidores/status';
        axios.get(url, {
            responseType: 'json'
        }).then(function (res)  {
            if (res.status == 200) {
                for (let i = 0; i < res.data.length; i++) {
                    mensaje.push(res.data[i]);
                }

                var status45 = mensaje.filter(m => m.servidor == 45);
                document.getElementById("status45").innerHTML = (status45[0].status);
                document.getElementById("query45").innerHTML = (status45[0].query);
                document.getElementById("totalQuery45").innerHTML = (status45[0].totalQuery);
                document.getElementById("fechainicio45").innerHTML = (status45[0].fechainicio);
                document.getElementById("fechatermino45").innerHTML = (status45[0].fechatermino);

                var status168 = mensaje.filter(m => m.servidor == 168);
                document.getElementById("status168").innerHTML = (status168[0].status);
                document.getElementById("query168").innerHTML = (status168[0].query);
                document.getElementById("totalQuery168").innerHTML = (status168[0].totalQuery);
                document.getElementById("fechainicio168").innerHTML = (status168[0].fechainicio);
                document.getElementById("fechatermino168").innerHTML = (status168[0].fechatermino);

                var status170 = mensaje.filter(m => m.servidor == 170);
                document.getElementById("status170").innerHTML = (status170[0].status);
                document.getElementById("query170").innerHTML = (status170[0].query)   
                document.getElementById("totalQuery170").innerHTML = (status170[0].totalQuery);
                document.getElementById("fechainicio170").innerHTML = (status170[0].fechainicio);
                document.getElementById("fechatermino170").innerHTML = (status170[0].fechatermino);

                var status186 = mensaje.filter(m => m.servidor == 186);
                document.getElementById("status186").innerHTML = (status186[0].status);
                document.getElementById("query186").innerHTML = (status186[0].query);
                document.getElementById("totalQuery186").innerHTML = (status186[0].totalQuery);
                document.getElementById("fechainicio186").innerHTML = (status186[0].fechainicio );
                document.getElementById("fechatermino186").innerHTML = (status186[0].fechatermino);
                
                var status1862 = mensaje.filter(m => m.servidor == 1862);
                document.getElementById("status1862").innerHTML = (status1862[0].status);
                document.getElementById("query1862").innerHTML = (status1862[0].query);
                document.getElementById("totalQuery1862").innerHTML = (status1862[0].totalQuery);
                document.getElementById("fechainicio1862").innerHTML = (status1862[0].fechainicio );
                document.getElementById("fechatermino1862").innerHTML = (status1862[0].fechatermino);


            }
        
        }
    );
    </script>

</body>

</html>
